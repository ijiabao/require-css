/**
 * require css supported IE respond (with respond.js)
 * https://github.com/ijiabao/require-css-respond
 */

define(function(){
    var loadCss = function(url, callback){
        var link = document.createElement('link');
        link.type = 'text/css';
        link.rel = 'stylesheet';
        link.href = url;
        if(window.respond){ // update respond|respond.proxy on load
            link.onload = function(){
                (respond.updateProxy || respond.update)(link);
            };
        }
        document.getElementsByTagName("head")[0].appendChild(link);
        setTimeout(function(){
            callback(link);
        });
    };
    return {
        normalize: function(name, normalize){
            if (name.substr(name.length - 4, 4) == '.css')
                name = name.substr(0, name.length - 4);
            return normalize(name);
        },
        load: function(name, require, callback, config ){
            loadCss(require.toUrl(name+'.css'), callback);
        }
    };
});